{"remainingRequest":"/home/rabie/Desktop/eee/GlassBook2/client/glass-book/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/rabie/Desktop/eee/GlassBook2/client/glass-book/src/App.vue?vue&type=style&index=0&id=7ba5bd90&scoped=true&lang=css&","dependencies":[{"path":"/home/rabie/Desktop/eee/GlassBook2/client/glass-book/src/App.vue","mtime":1607328282524},{"path":"/home/rabie/Desktop/eee/GlassBook2/client/glass-book/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rabie/Desktop/eee/GlassBook2/client/glass-book/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/rabie/Desktop/eee/GlassBook2/client/glass-book/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/rabie/Desktop/eee/GlassBook2/client/glass-book/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rabie/Desktop/eee/GlassBook2/client/glass-book/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnYtbWFpbiAudi1jb250ZW50IHsKICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7Cn0KLmNvbG9yIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTU2NWMwICFpbXBvcnRhbnQ7Cn0KLnYtY2FyZCA+ICo6Zmlyc3QtY2hpbGQ6bm90KC52LWJ0bik6bm90KC52LWNoaXApIHsKICBjb2xvcjogd2hpdGU7Cn0KCi5kaWFsb2ctY3VzdG9tIHsKICBvdmVyZmxvdy15OiBoaWRkZW4gIWltcG9ydGFudDsKfQoKLnZkaWFsb2duZXcgewogIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDQwcHg7CiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDQwcHg7CiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMjBweDsKICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMjBweDsKICBjb2xvcjogcmVkOwp9CgoucG9zdC1pbWFnZSB7CiAgbWF4LWhlaWdodDogMTAwcHg7Cn0KCi5jYXJkLXNjcm9sbCB7CiAgb3ZlcmZsb3cteTogc2Nyb2xsOwp9CgouZGl2LXNlYXJjaCB7CiAgei1pbmRleDogMTA7Cn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <router-view v-if=\"!isAuth\"></router-view>\n    <div id=\"app\" v-else>v-else\n      <v-app id=\"inspire\">\n        <v-app id=\"inspire\">\n          <v-navigation-drawer\n            v-model=\"drawer\"\n            :clipped=\"$vuetify.breakpoint.lgAndUp\"\n            app\n          >\n            <v-list dense>\n              <template>\n                <v-row>\n                  <v-col cols=\"6\"> </v-col>\n                  <v-col cols=\"6\" class=\"text-center\">\n                    <!-- <a\n                  href=\"#!\"\n                  class=\"body-2 black--text\"\n                >EDIT</a> -->\n                  </v-col>\n                </v-row>\n                <!-- <v-list-group\n              v-else-if=\"item.children\"\n              :key=\"item.text\"\n              v-model=\"item.model\"\n              :prepend-icon=\"item.model ? item.icon : item['icon-alt']\"\n              append-icon=\"\"\n            >\n              <template v-slot:activator>\n                <v-list-item-content>\n                  <v-list-item-title>\n                    {{ item.text }}\n                  </v-list-item-title>\n                </v-list-item-content>\n              </template>\n              <v-list-item\n                v-for=\"(child, i) in item.children\"\n                :key=\"i\"\n                link\n              >\n                <v-list-item-action v-if=\"child.icon\">\n                  <v-icon>{{ child.icon }}</v-icon>\n                </v-list-item-action>\n                <v-list-item-content>\n                  <v-list-item-title>\n                    {{ child.text }}\n                  </v-list-item-title>\n                </v-list-item-content>\n              </v-list-item>\n            </v-list-group> -->\n                <router-link to=\"/chat\">\n                  <v-list-item>\n                    <v-list-item-action>\n                      <v-icon>mdi-message</v-icon>\n                    </v-list-item-action>\n                    <v-list-item-content>\n                      <v-list-item-title> Messenger </v-list-item-title>\n                    </v-list-item-content>\n                  </v-list-item>\n                </router-link>\n                <router-link to=\"/get-friends\">\n                  <v-list-item>\n                    <v-list-item-action>\n                      <v-icon>mdi-account</v-icon>\n                    </v-list-item-action>\n                    <v-list-item-content>\n                      <v-list-item-title> Friends </v-list-item-title>\n                    </v-list-item-content>\n                  </v-list-item>\n                </router-link>\n              </template>\n            </v-list>\n          </v-navigation-drawer>\n\n          <v-app-bar\n            :clipped-left=\"$vuetify.breakpoint.lgAndUp\"\n            app\n            color=\"blue darken-3\"\n            dark\n          >\n            <v-app-bar-nav-icon\n              @click.stop=\"drawer = !drawer\"\n            ></v-app-bar-nav-icon>\n            <v-toolbar-title style=\"width: 300px\" class=\"ml-0 pl-4\">\n              <span\n                @click=\"goHome()\"\n                style=\"cursor: pointer\"\n                v-if=\"windowWidth > 330\"\n                >Glass Book {{ userId }}</span\n              >\n              <span style=\"cursor: pointer\" @click=\"goHome()\" v-else>GB</span>\n            </v-toolbar-title>\n            <v-text-field\n              v-if=\"this.$route.name == 'Posts'\"\n              flat\n              solo-inverted\n              hide-details\n              clearable\n              prepend-inner-icon=\"mdi-magnify\"\n              label=\"Search\"\n              filled\n              class=\"hidden-sm-and-down\"\n              v-model=\"keywords\"\n              v-on:keydown=\"searchUser\"\n            ></v-text-field>\n\n            <v-spacer></v-spacer>\n            <!-- <v-btn icon>\n              <v-icon>mdi-account</v-icon>\n            </v-btn> -->\n            <v-badge\n              :content=\"friendRequestlength\"\n              :value=\"friendRequestlength\"\n              color=\"blue\"\n              overlap\n            >\n              <v-icon @click=\"onFriendRequest\" large> mdi-account </v-icon>\n            </v-badge>\n            <v-btn icon>\n              <v-icon>mdi-bell</v-icon>\n            </v-btn>\n            <v-btn icon large>\n              <v-avatar size=\"32px\" item>\n                <v-img\n                  :src=\"pho\"\n                  alt=\"Vuetify\"\n                  id=\"logo\"\n                  @click=\"upPhoto\"\n                ></v-img\n              ></v-avatar>\n            </v-btn>\n          </v-app-bar>\n          <v-main>\n            <v-text-field\n              v-if=\"windowWidth < 959 && this.$route.name == 'Posts'\"\n              flat\n              solo-inverted\n              hide-details\n              prepend-inner-icon=\"mdi-magnify\"\n              label=\"Search\"\n              v-model=\"keywords\"\n              v-on:keydown=\"searchUser\"\n            ></v-text-field>\n            <v-container fluid>\n              <!-- <button @click=\"sendMsg\">Send</button>   center -->\n              <v-content>\n                <!-- <div \n            v-for=\"(post, index) in posts\" :key=\"index\"\n            @click=\"inPostClick(post)\">\n             <my-post  \n            :image=\"'http://localhost:3000/static/' + post._id + '.PNG'\"  \n            :text=\"post.text\"\n            >\n            </my-post>\n           </div> -->\n\n                <!-- Search by name -->\n                <div v-if=\"keywords\" class=\"div-search\">\n                  <v-card\n                    class=\"mx-auto card-scroll\"\n                    max-width=\"400\"\n                    max-height=\"100\"\n                    tile\n                  >\n                    <v-list-item v-for=\"user in searchNewUser\" :key=\"user.id\">\n                      <v-list-item @click=\"onSearchNewUSer(user.id)\">\n                        <v-img\n                          max-height=\"50\"\n                          max-width=\"50\"\n                          :src=\"'data:image/PNG;base64,' + user.image\"\n                        ></v-img>\n                        <span style=\"margin-left: 50%\">{{ user.name }}</span>\n                        <hr />\n                      </v-list-item>\n                    </v-list-item>\n                  </v-card>\n                </div>\n                <router-view> </router-view>\n              </v-content>\n            </v-container>\n          </v-main>\n          <v-btn\n            bottom\n            color=\"pink\"\n            dark\n            fab\n            fixed\n            right\n            @click=\"dialog = !dialog\"\n          >\n            <v-icon>mdi-plus</v-icon>\n          </v-btn>\n          <v-dialog\n            scrollable\n            v-model=\"dialog\"\n            width=\"800px\"\n            style=\"color: red\"\n            content-class=\"vdialognew\"\n            persistent\n          >\n            <!-- plus button -->\n            <v-card style=\"overflow-y: hidden !important\" class=\"rounded-card\">\n              <v-card-title class=\"color dialog-custom darken-2\">\n                Create contact\n              </v-card-title>\n              <v-container fluid>\n                <v-row class=\"mx-2\">\n                  <v-col class=\"align-center justify-space-between\" cols=\"12\">\n                    <v-row align=\"center\" class=\"mr-0\">\n                      <v-avatar size=\"40px\" class=\"mx-3\">\n                        <img :src=\"pho\" alt=\"\" />\n                      </v-avatar>\n                      <v-text-field\n                        placeholder=\"What is in your mind\"\n                        v-model=\"postText\"\n                      ></v-text-field>\n                    </v-row>\n                  </v-col>\n\n                  <v-col cols=\"12\">\n                    <img class=\"post-image\" id=\"output\" />\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <!-- <label for=\"upload-photo\">Browse...</label> -->\n                    <input\n                      type=\"file\"\n                      id=\"upload-photo\"\n                      @change=\"onFileSelected($event)\"\n                    />\n                  </v-col>\n                </v-row>\n              </v-container>\n              <v-card-actions>\n                <!-- <v-btn\n              text\n              color=\"primary\"\n            >More</v-btn> -->\n                <v-spacer></v-spacer>\n                <v-btn text color=\"primary\" @click=\"dialog = false\"\n                  >Cancel</v-btn\n                >\n                <v-btn text @click.prevent=\"savePost\">Save</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-app>\n      </v-app>\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\n//import router from './router/index';\nimport { eventBus } from \"./main\";\n// import Post from './components/post/post'\nimport * as types from \"./store/types\";\n\nexport default {\n  name: \"App\",\n\n  data: () => ({\n    dialog: false,\n    drawer: null,\n    selectedFile: null,\n    postText: \"\",\n    image: \"\",\n    // items: [\n    //   { icon: 'mdi-contacts', text: 'Contacts' },\n    //   { icon: 'mdi-history', text: 'Frequently contacted' },\n    //   { icon: 'mdi-content-copy', text: 'Duplicates' },\n    //   {\n    //     icon: 'mdi-chevron-up',\n    //     'icon-alt': 'mdi-chevron-down',\n    //     text: 'Labels',\n    //     model: true,\n    //     children: [\n    //       { icon: 'mdi-plus', text: 'Create label' },\n    //     ],\n    //   },\n    //   {\n    //     icon: 'mdi-chevron-up',\n    //     'icon-alt': 'mdi-chevron-down',\n    //     text: 'More',\n    //     model: false,\n    //     children: [\n    //       { text: 'Import' },\n    //       { text: 'Export' },\n    //       { text: 'Print' },\n    //       { text: 'Undo changes' },\n    //       { text: 'Other contacts' },\n    //     ],\n    //   },\n    //   { icon: 'mdi-cog', text: 'Settings' },\n    //   { icon: 'mdi-message', text: 'Messenger', onClick: function() {\n    //     console.log('1111 App.vue')\n    //     router.push('/chat')\n    //   } },\n    //   { icon: 'mdi-help-circle', text: 'Help' },\n    //   { icon: 'mdi-cellphone-link', text: 'App downloads' },\n    //   { icon: 'mdi-keyboard', text: 'Go to the old version' },\n    // ],\n\n    // items: [\n    //   { icon: 'mdi-message', text: 'Messenger', onClick: function() {\n    //     console.log('1111 App.vue')\n    //     router.push('/chat')\n    //   }\n    //   }\n    // ],\n    socket: io(\"http://localhost:3000\", {\n      query: { token: localStorage.getItem(\"token\") },\n    }),\n    photo: null,\n    windowWidth2: window.innerWidth,\n    keywords: \"\",\n    isSearch: false,\n    searchNewUser: [],\n  }),\n  computed: {\n    isAuth() {\n      if (localStorage.getItem(\"token\")) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    pho() {\n      if (this.photo) {\n        return this.photo;\n      }\n      return this.$store.state.photo;\n    },\n    posts() {\n      return this.$store.getters.getPosts;\n    },\n\n    friendRequestlength() {\n      return this.$store.getters.getFriendRequestLength;\n    },\n\n    currentRouteName() {\n      console.log(\"App.vue current route\", this.$route.name);\n      return this.$route.name;\n    },\n\n    userId() {\n      return this.$store.state.auth;\n    }\n  },\n  created() {\n    this.currentRouteName;\n    this.socket.on(\"new-post\", (post) => {\n      console.log('App.vue new-post13333333', post)\n      this.$store.dispatch(\"newPost\", post);\n    });\n    this.$store.dispatch(\"socketOnReceive\");\n\n    eventBus.$on(\"photoChanged\", (d) => {\n      this.photo = d;\n    });\n\n    this.$store.dispatch(\"getPhotoFromServer\");\n    this.photo = this.$store.state.photo;\n\n    this.$store.dispatch(types.GET_FRIEND_REQUEST_LENGTH);\n\n    this.socket.on(\"new-fr-req\", (data) => {\n      console.log(\"Appvue socket 990\", data);\n      this.$store.commit(types.REQUEST_SOCKET, data);\n    });\n\n\n    // axios.post(\n    //   \"http://localhost:3000/friend-request/request-pending\",\n    //   { id: \"5f9cedeb0dffda56e12df8ae\" },\n    //   {\n    //     headers: {\n    //       authorization: localStorage.getItem(\"token\"),\n    //     },\n    //   }\n    // ).then((value) => {console.log('App.vue 34121: ', value)});\n\n  },\n\n  methods: {\n    // sendMsg() {\n    //   // this.socket.emit('msg', {msg: 'sosa', id: '5f6990a54730351e94e1fc11'});\n    //   this.$store.dispatch('socketOnConnection', )\n    // },\n    upPhoto() {\n      this.$store.dispatch(\"upPhoto\");\n    },\n    onFileSelected(event) {\n      this.selectedFile = event.target.files[0];\n      var output = document.getElementById(\"output\");\n      output.src = URL.createObjectURL(event.target.files[0]);\n      this.isFileSelected = true;\n      output.onload = function () {\n        URL.revokeObjectURL(output.src);\n      };\n    },\n\n    savePost() {\n      const fd = new FormData();\n      fd.append(\"file\", this.selectedFile, this.selectedFile.name);\n      fd.append(\"data\", this.postText);\n      this.dialog = false;\n      try {\n        axios\n          .post(\"http://localhost:3000/post/new-post\", fd, {\n            headers: { authorization: localStorage.getItem(\"token\") },\n          })\n          .then((res) => {\n            this.socket.emit(\"new-post\", res);\n          });\n      } catch (error) {\n        console.log(\"App.vue, error: \", error);\n      }\n    },\n    onResize() {\n      console.log(\"App.vue-onResize()\", this.windowWidth2);\n      this.windowWidth2 = window.innerWidth;\n    },\n    searchUser() {\n      axios\n        .post(\n          \"http://localhost:3000/users/search-user\",\n          { name: this.keywords },\n          {\n            headers: { authorization: localStorage.getItem(\"token\") },\n          }\n        )\n        .then((res) => {\n          if (res.data[\"success\"]) this.searchNewUser = res.data.users;\n        });\n    },\n    onSearchNewUSer(id) {\n      this.searchNewUser.find((user) => {\n        user.id = id;\n        eventBus.shareImageSearchUser(user.image);\n        this.searchNewUser = null;\n        this.$router.push(\"/user/\" + id).catch(() => {});\n      });\n    },\n    onFriendRequest() {\n      this.$router.push(\"/friend-requests\").catch(() => {});\n      this.friendRequestlength = 0;\n    },\n    goHome() {\n      this.$router.push(\"/posts\");\n    },\n  },\n  watch: {\n    windowWidth2(oldWidth, newWidth) {\n      this.txt = `it changed to ${newWidth} from ${oldWidth}`;\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      window.addEventListener(\"resize\", this.onResize);\n    });\n  },\n  \n  beforeDestroy() {\n    window.removeEventListener(\"resize\", this.onResize);\n  },\n};\n</script>\n\n<style scoped>\n.v-main .v-content {\n  padding: 0 !important;\n}\n.color {\n  background-color: #1565c0 !important;\n}\n.v-card > *:first-child:not(.v-btn):not(.v-chip) {\n  color: white;\n}\n\n.dialog-custom {\n  overflow-y: hidden !important;\n}\n\n.vdialognew {\n  border-top-left-radius: 40px;\n  border-top-right-radius: 40px;\n  border-bottom-left-radius: 20px;\n  border-bottom-right-radius: 20px;\n  color: red;\n}\n\n.post-image {\n  max-height: 100px;\n}\n\n.card-scroll {\n  overflow-y: scroll;\n}\n\n.div-search {\n  z-index: 10;\n}\n</style>\n"]}]}